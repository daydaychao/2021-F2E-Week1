import{j as l,F as C,a as t,S as z,L as p,t as se,b as ae,c as ie,r as d,u as P,d as Q,C as f,e as I,m as U,i as de,M as he,T as me,f as ge,g as pe,h as fe,P as xe,B as Ee,k as be,l as Y,R as E,Q as ye,n as Ce,o as q,p as we,q as Fe}from"./vendor.bd296d86.js";const ke=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const g of a.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&s(g)}).observe(document,{childList:!0,subtree:!0});function c(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerpolicy&&(a.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?a.credentials="include":n.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(n){if(n.ep)return;n.ep=!0;const a=c(n);fetch(n.href,a)}};ke();function G({headerStyle:e}){let r=!0;return e!="home"&&(r=!1),l(C,{children:[r&&l("header",{className:"flex flex-col justify-center px-4 items-center min-h-[330px] md:min-h-[590px] home-top-image",children:[t("h1",{className:"text-white text-3xl md:text-4xl mb-5",children:"\u53F0\u7063\u65C5\u904A\u666F\u9EDE\u5C0E\u89BD"}),t("h4",{className:"text-white text-base md:text-3xl mb-5",children:"\u5168\u53F0\u7063\u89C0\u5149\u666F\u9EDE\u5831\u4F60\u77E5\uFF0C\u4EA4\u901A\u9910\u98F2\u65C5\u5BBF\u901A\u901A\u6709!"}),l("div",{className:"flex flex-row items-center bg-white px-2 h-[50px] md:h-[75px] w-3/4 rounded-lg mb-4 border-2 md:border-4 border-black",children:[t(z,{className:"h-10 w-10"}),t("input",{className:"h-full w-full p-5",placeholder:"\u5730\u9EDE...\u535A\u7269\u9928...\u65C5\u904A\u57CE\u5E02"})]}),t("button",{className:"btn-green w-[170px]",children:"\u641C\u5C0B"})]}),!r&&t("header",{className:"bg-green-light p-3",children:t(p,{to:"home",children:l("div",{className:"mx-auto container px-5 md:px-10 font-bold",children:[t("h1",{className:"text-3xl md:text-2xl mb-2",children:"\u53F0\u7063\u65C5\u904A\u666F\u9EDE\u5C0E\u89BD"}),t("h4",{className:"text-base md:text-lg ",children:"\u5168\u53F0\u7063\u89C0\u5149\u666F\u9EDE\u5831\u4F60\u77E5\uFF0C\u4EA4\u901A\u9910\u98F2\u65C5\u5BBF\u901A\u901A\u6709!"})]})})})]})}var T;(function(e){e.Taipei="Taipei",e.NewTaipei="NewTaipei",e.HsinchuCounty="HsinchuCounty",e.Keelung="Keelung",e.Taoyuan="Taoyuan",e.Hsinchu="Hsinchu",e.YilanCounty="YilanCounty",e.MiaoliCounty="MiaoliCounty",e.Taichung="Taichung",e.ChanghuaCounty="ChanghuaCounty",e.NantouCounty="NantouCounty",e.YunlinCounty="YunlinCounty",e.Chiayi="Chiayi",e.ChiayiCounty="ChiayiCounty",e.Tainan="Tainan",e.Kaohsiung="Kaohsiung",e.PingtungCounty="PingtungCounty",e.PenghuCounty="PenghuCounty",e.TaitungCounty="TaitungCounty",e.HualienCounty="HualienCounty",e.KinmenCounty="KinmenCounty",e.LienchiangCounty="LienchiangCounty"})(T||(T={}));var w;(function(e){e.Taipei="\u81FA\u5317\u5E02",e.NewTaipei="\u65B0\u5317\u5E02",e.HsinchuCounty="\u65B0\u7AF9\u7E23",e.Keelung="\u57FA\u9686\u5E02",e.Taoyuan="\u6843\u5712\u5E02",e.Hsinchu="\u65B0\u7AF9\u5E02",e.YilanCounty="\u5B9C\u862D\u7E23",e.MiaoliCounty="\u82D7\u6817\u7E23",e.Taichung="\u81FA\u4E2D\u5E02",e.ChanghuaCounty="\u5F70\u5316\u7E23",e.NantouCounty="\u5357\u6295\u7E23",e.YunlinCounty="\u96F2\u6797\u7E23",e.Chiayi="\u5609\u7FA9\u5E02",e.ChiayiCounty="\u5609\u7FA9\u7E23",e.Tainan="\u81FA\u5357\u5E02",e.Kaohsiung="\u9AD8\u96C4\u5E02",e.PingtungCounty="\u5C4F\u6771\u7E23",e.PenghuCounty="\u6F8E\u6E56\u7E23",e.TaitungCounty="\u81FA\u6771\u7E23",e.HualienCounty="\u82B1\u84EE\u7E23",e.KinmenCounty="\u91D1\u9580\u7E23",e.LienchiangCounty="\u9023\u6C5F\u7E23"})(w||(w={}));var S;(function(e){e.LeisureAgriculture="\u4F11\u9592\u8FB2\u696D\u985E",e.Historic="\u53E4\u8E5F\u985E",e.NationalScenic="\u570B\u5BB6\u98A8\u666F\u5340\u985E",e.SnacksSpecialties="\u5C0F\u5403/\u7279\u7522\u985E",e.Temples="\u5EDF\u5B87\u985E",e.Culture="\u6587\u5316\u985E",e.ForestRecreation="\u68EE\u6797\u904A\u6A02\u5340\u985E",e.HotSpring="\u6EAB\u6CC9\u985E",e.Ecological="\u751F\u614B\u985E",e.NaturalScenery="\u81EA\u7136\u98A8\u666F\u985E",e.Art="\u85DD\u8853\u985E",e.SightseeingFactory="\u89C0\u5149\u5DE5\u5EE0\u985E",e.Recreation="\u904A\u61A9\u985E",e.MetropolitanPark="\u90FD\u6703\u516C\u5712\u985E",e.SportsFitness="\u9AD4\u80B2\u5065\u8EAB\u985E",e.Other="\u5176\u4ED6"})(S||(S={}));const X=()=>Object.values(T),_=()=>Object.values(w),Ae=e=>Object.values(e),De=e=>Object.keys(e),Se=(e,r)=>e?r.filter(c=>{if(Ie(c).find(a=>Pe(e,a)))return!0}):r,Ne=(e,r)=>{let c=[];return e.map(s=>Object.keys(r).map((n,a)=>{s===n&&c.push(r[n])})),c},Be=(e,r)=>{if(e.length===0)return r;const c=Ne(e,w);return r.filter(s=>c.find(n=>{if(s.City==n)return console.log("location.City == c",s.City==n),!0}))},ve=(e,r)=>e.length===0?r:(console.log("specials:",e),r.filter(c=>e.find(s=>{if(c.Class1==s||c.Class2==s||c.Class3==s)return!0}))),L=(e,r)=>r.filter(c=>c!==e),Pe=(e,r)=>r.match(RegExp(e,"i")),Ie=e=>Object.values(e).filter(r=>typeof r=="string"),Te="https://ptx.transportdata.tw/MOTC/v2/",V="Tourism/ScenicSpot/";function Le(){let e="bcee97e768f0431784373e00f3539404",r="bAY5MKsU_isyBjPsnFHcHlJgd1k",c=new Date().toUTCString(),s=new ae("SHA-1","TEXT");s.setHMACKey(r,"TEXT"),s.update("x-date: "+c);let n=s.getHMAC("B64");return{Authorization:'hmac username="'+e+'", algorithm="hmac-sha1", headers="x-date", signature="'+n+'"',"X-Date":c}}function Me(e){return{ID:e.ID,City:e.City,Name:e.Name,Phone:e.Phone,Address:e.Address,ZipCode:e.ZipCode,DescriptionDetail:e.DescriptionDetail,Description:e.Description,TravelInfo:e.TravelInfo,OpenTime:e.OpenTime,Picture:e.Picture,MapUrl:e.MapUrl,Position:e.Position,Class1:e.Class1,Class2:e.Class2,Class3:e.Class3,Level:e.Level,WebsiteUrl:e.WebsiteUrl,ParkingInfo:e.ParkingInfo,ParkingPosition:e.ParkingPosition,TicketInfo:e.TicketInfo,Remarks:e.Remarks,Keyword:e.Keyword}}function He(e){return String(new globalThis.URL(e,Te))}async function J(e){return fetch(He(e),{method:"GET",headers:Le()}).then(r=>r.json()).then(r=>r.map(Me,r)).then(se(console.log))}const je="?$filter=Picture%2FPictureUrl1%20ne%20null%20&$format=JSON",Oe={getAll:()=>J(`${V}${je}`),getByCityName:e=>J(`${V}${e}`)},b=ie(e=>({loading:!1,scenicSpotsAll:[],scenicSpotsFiltered:[],scenicSpotId:{},async getScenicSpotsAll(){Oe.getAll().then(r=>e(c=>c.scenicSpotsAll=r))},setLoading(r){e({loading:r})}})),Ke=()=>Object.keys(w).map(e=>`/2021-F2E-Week1/images/${e}.jpg`);function Re(){const e=b(i=>i.scenicSpotsAll);let r=X(),c=_(),s=Ke();const n="bg-gray-300 bg-cover h-[220px] relative text-center overflow-hidden hover:cursor-pointer",a="text-white absolute bottom-2 left-2",g=b(i=>i.getScenicSpotsAll);return d.exports.useEffect(()=>{e.length===0&&g()},[e]),l(C,{children:[t("h1",{className:"text-xl md:text-2xl font-bold mb-4 mt-14",children:"\u71B1\u9580\u666F\u9EDE"}),t("div",{className:"grid grid-col md:grid-cols-3 gap-4 ",children:c.map((i,h)=>t(p,{to:"scenicSpot?city="+r[h],children:t("div",{className:n,style:{backgroundImage:`url(${s[h]})`},children:t("label",{className:a,children:i})})},h))})]})}function M({id:e,name:r,text:c,isChecked:s,onChange:n}){function a(){document.getElementById(e).click()}return l("div",{className:"checkbox-btn",onClick:a,children:[t("input",{id:e,type:"checkbox",name:r,onChange:n}),t("label",{children:c})]})}function $e(){return l("svg",{className:"animate-spin -ml-1 mr-1 h-5 w-5 text-green-light",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[t("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}var ze="/2021-F2E-Week1/assets/nopic.90c3ec95.jpg";let N=0,H=!1;const W=X(),B=_(),Qe=De(S),Ue=Ae(S);function Ye(){const[e,r]=P("city",I),[c,s]=P("text",I),[n,a]=P("special",I),g=b(u=>u.getScenicSpotsAll),i=b(u=>u.scenicSpotsAll),[h,y]=d.exports.useState([]),[v,j]=d.exports.useState([]),[F,Z]=d.exports.useState([]),[m,k]=d.exports.useState([]),[x,O]=d.exports.useState([]),[K,A]=d.exports.useState(!1),ee=d.exports.useCallback(Q(u=>{A(!0),console.log("%c debounce","color:orange;background:black;padding:2px 10px"),Z(u)},800),[]),te=u=>{ee(u.target.value)},R=u=>{if(A(!0),console.log("%c handleCheckboxBtn","color:orange;background:black;padding:2px 10px"),u.target.name==="allCity"){m.length===1&&m[0]==="allCity"&&(u.target.checked=!0),m.map(o=>{var $;($=document.getElementById(o))==null||$.click()}),k(["allCity"]);return}else if(u.target.name!="allCity"){if(m.includes("allCity")){const o=document.getElementById("allCity");o.checked=!1,k(L("allCity",m))}u.target.checked?k(o=>[...o,u.target.name]):k(L(u.target.name,m))}},ne=u=>{A(!0),u.target.checked&&!x.includes(u.target.name)?O(o=>[...o,u.target.name]):O(L(u.target.name,x))},ue=async()=>{console.log("%c\u6587\u5B57","color:orange;background:black;padding:2px 10px",F),console.log("%c\u57CE\u5E02","color:orange;background:black;padding:2px 10px",m),console.log("%c\u7279\u5225","color:orange;background:black;padding:2px 10px",x);let u;i.length>0?(console.log("allLocation exits"),u=U(o=>o,i)):u=U(o=>o,h),m.includes("allCity")||(u=await Be(m,u)),u=await Se(F,u),u=await ve(x,u),console.log("\u7BE9\u9078\u66F4\u65B0\u4E2D..."),j(u)},re=async()=>{H||i.length===0&&de("allCity",m)&&(console.log("\u53D6\u5F97\u5168\u90E8\u8CC7\u6599\u4E2D..."),H=!0,await g(),H=!1)};N+=1,console.log("renderTime",N);const oe=d.exports.useCallback(Q(u=>{u()},1e3),[]);d.exports.useEffect(()=>{re(),N>0&&oe(async()=>{console.log("%c useEffect: debounce filter","color:orange;background:black;padding:2px 10px"),r(m),s(F),a(x),await ue(),A(!1)})},[F,m,x]),d.exports.useEffect(()=>{j(h)},[h]),d.exports.useEffect(()=>{i.length>0&&h.length===0&&y(i)},[i]),d.exports.useEffect(()=>{let u=document.querySelectorAll("#"+e);console.log("\u521D\u6B21\u6E32\u67D3 document ready");for(var o=0;o<u.length;o++)u[o].click();return()=>{N=0}},[]);const le=({target:u})=>{const o=u;o.onerror=null,o.src=ze},D=(u,o)=>t(M,{onChange:R,id:W[u],name:W[u],text:o},u),ce=(u,o)=>t(M,{onChange:ne,id:Qe[u],name:o,text:o},u);return l(C,{children:[l("section",{className:"flex flex-row items-center my-4",children:[t(p,{to:"/2021-F2E-Week1/home",children:"\u9996\u9801"}),t(f,{className:"h-4 w-4"}),t(p,{to:"/2021-F2E-Week1/home",children:"\u57CE\u5E02"}),t(f,{className:"h-4 w-4"}),t("span",{className:"text-gray-400",children:"\u666F\u9EDE"})]}),l("section",{className:"flex flex-col md:flex-row",children:[l("article",{className:"filter-wrapper",children:[t("h1",{className:"text-xl md:text-xl font-bold mb-3.5",children:"\u7BE9\u9078\u689D\u4EF6"}),t(M,{onChange:R,id:"allCity",name:"allCity",text:"\u5168\u53F0\u666F\u9EDE"}),t("div",{className:"h-4"}),t("h4",{className:"text-sm md:text-sm font-black mb-2",children:"\u5317\u90E8"}),t("div",{className:"checkbox-btn-wrapper",children:B.map((u,o)=>{if(o<=4)return D(o,u)})}),t("h4",{className:"text-sm md:text-sm font-black mb-2",children:"\u4E2D\u90E8"}),t("div",{className:"checkbox-btn-wrapper",children:B.map((u,o)=>{if(o>5&&o<=13)return D(o,u)})}),t("h4",{className:"text-sm md:text-sm font-black mb-2",children:"\u5357\u90E8"}),t("div",{className:"checkbox-btn-wrapper",children:B.map((u,o)=>{if(o>13&&o<=16)return D(o,u)})}),t("h4",{className:"text-sm md:text-sm font-black mb-2",children:"\u5916\u5CF6"}),t("div",{className:"checkbox-btn-wrapper",children:B.map((u,o)=>{if(o>16&&o<=21)return D(o,u)})}),t("h4",{className:"text-sm md:text-sm font-black mb-2",children:"\u666F\u9EDE\u985E\u5225"}),t("div",{className:"checkbox-btn-wrapper",children:Ue.map((u,o)=>ce(o,u))})]}),t("article",{className:"filter-md-spacing"}),l("article",{className:"md:inline-flex flex-col w-full p-5",children:[l("div",{className:"flex flex-row items-center bg-white border-black border-2 h-[50px] md:h-[75px] xl:w-3/4 mb-2 pl-4",children:[t(z,{className:"h-10 w-10"}),t("input",{className:"h-full w-full p-5",placeholder:"\u5730\u9EDE...\u535A\u7269\u9928...\u65C5\u904A\u57CE\u5E02",onChange:te})]}),l("div",{className:"flex justify-between",children:[K&&l("small",{className:"my-4 flex flex-row items-end",children:[t($e,{}),t("span",{children:"\u8CC7\u6599\u8B80\u53D6\u4E2D..."})]}),!K&&l("small",{className:"my-4",children:[" ",v.length," \u9805\u666F\u9EDE"]}),l("button",{className:"w-[120px] mb-2.5 rounded-none bg-gray-300 sm:hidden font-bold",children:[t(f,{className:"h-5 w-5 inline-block items-center"}),"\u7BE9\u9078\u689D\u4EF6"]})]}),v&&v.map(u=>l("div",{className:"flex flex-row overflow-hidden bg-white border rounded-[10px] pr-9 h-60 mb-4 xl:w-3/4",children:[t("div",{className:"overflow-hidden min-w-[110px] relative w-2/5",children:t("img",{src:u.Picture.PictureUrl1,onError:le,className:"object-cover absolute top-50% left-50% block min-w-full min-h-full transform translate-x-50 translate-y-50"})}),l("div",{className:"py-6 flex flex-col justify-between ml-5 font-bold w-3/5 relative md:w-3/5 xl:w-4/5",children:[t("h3",{className:"text-sm",children:u.City}),t("h1",{className:"mt-0.5",children:u.Name}),t("small",{className:"text-sm mt-4 font-normal desText",children:u.DescriptionDetail}),t(p,{to:`scenicSpot/${u.ID}`,className:"flex justify-end mt-3",children:l("button",{className:"w-40 bg-white border border_g text-lg font-bold inline-block px-8 py-2",children:["\u8A73\u7D30\u4ECB\u7D39",t(f,{className:"hidden md:inline-block align-text-bottom h-5 w-5"})]})})]})]},u.ID))]})]})]})}function qe({lat:e,lon:r}){return t(C,{children:l(he,{className:"h-full",center:[e,r],zoom:15,scrollWheelZoom:!1,children:[t(me,{attribution:'\xA9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),t(ge,{position:[e,r]})]})})}var Ge="/2021-F2E-Week1/assets/autumn-in-taiwan-header.e1b92cba.png";function Xe(){const{id:e}=pe(),r=b(i=>i.scenicSpotsAll),c=b(i=>i.getScenicSpotsAll),s=i=>r.find(h=>h.ID===i);let n=s(e);const[a,g]=d.exports.useState({});return d.exports.useEffect(()=>{if(r.length===0&&c(),n&&n.ID!=e&&(console.warn("detail.ID != id",n.ID),s(e)),n&&n.Picture!=null){let i=new Map(Object.entries(n.Picture));g(()=>{let h={backgroundImage:Ge,backgroundSize:"cover",backgroundPosition:"center"};return i.forEach(y=>{y&&y.includes("http")&&(h={backgroundImage:`url(${y})`,backgroundSize:"cover",backgroundPosition:"center"})}),h})}},[r,n,e]),d.exports.useEffect(()=>{window.scrollTo(0,0)},[]),l(C,{children:[l("section",{className:"flex flex-row items-center my-4",children:[t(p,{to:"/2021-F2E-Week1/home",children:"\u9996\u9801"}),t(f,{className:"h-4 w-4"}),t(p,{to:"/2021-F2E-Week1/home",children:"\u57CE\u5E02"}),t(f,{className:"h-4 w-4"}),t(p,{to:"/2021-F2E-Week1/scenicSpot",children:"\u666F\u9EDE"}),t(f,{className:"h-4 w-4"}),n==null?void 0:n.Name]}),t("section",{className:"my-4 border rounded-lg h-[310px]",style:a}),l("section",{className:"my-4 flex flex-col border border-gray rounded-lg p-10",children:[l("p",{className:"my-2 flex flex-row content-center items-center",children:[t(fe,{className:"h-5 w-5 mr-1 min-w-[20px]"}),"\u5730\u5740: ",(n==null?void 0:n.Address)||"\u8CC7\u8A0A\u5F85\u88DC"]}),l("p",{className:"my-2 flex flex-row content-center items-center",children:[t(xe,{className:"h-5 w-5 mr-1 min-w-[20px]"}),"\u96FB\u8A71: ",(n==null?void 0:n.Phone)||"\u8CC7\u8A0A\u5F85\u88DC"]}),l("p",{className:"my-2 flex flex-row content-center items-center",children:[t(Ee,{className:"h-5 w-5 mr-1 min-w-[20px]"}),"\u958B\u653E\u6642\u9593: ",(n==null?void 0:n.OpenTime)||"\u8CC7\u8A0A\u5F85\u88DC"]})]}),l("section",{className:"my-3 py-6",children:[t("h1",{className:"text-2xl font-bold mb-4",children:n==null?void 0:n.Name}),t("p",{children:n==null?void 0:n.DescriptionDetail})]}),t("section",{className:"my-4 border-0 border-transparent shadow rounded-lg overflow-hidden h-[310px] w-full",children:t(qe,{lat:(n==null?void 0:n.Position.PositionLat)||0,lon:(n==null?void 0:n.Position.PositionLon)||0})})]})}function _e(){return t(be,{children:l("div",{className:"h-screen flex flex-col",children:[l(Y,{children:[t(E,{exact:!0,path:"/2021-F2E-Week1/home",children:t(G,{headerStyle:"home"})}),t(E,{children:t(G,{headerStyle:"pages"})})]}),t("main",{className:"container px-5 mb-20 mx-auto",children:t(Y,{children:l(ye,{ReactRouterRoute:E,children:[t(E,{exact:!0,path:"/2021-F2E-Week1/home",component:Re}),t(E,{exact:!0,path:"/2021-F2E-Week1/scenicSpot",component:Ye}),t(E,{exact:!0,path:"/2021-F2E-Week1/scenicSpot/:id",component:Xe}),t(Ce,{to:"/2021-F2E-Week1/home"})]})})}),l("footer",{className:"text-center flex justify-center items-center bg-black text-white min-h-[40px] md:h-[60px] text-sm",children:[l("div",{className:"flex flex-row items-center mr-2",children:[t(q,{className:"h-4 w-4"}),"\u53F0\u7063\u65C5\u904A\u5C0E\u89BD",t(q,{className:"h-4 w-4"})]}),t("small",{children:"\u5341\u842C\u584A\u7684\u661F\u4E4B\u788E\u7247\u88FD\u4F5C\u51FA\u54C1"})]})]})})}we.render(t(Fe.StrictMode,{children:t(_e,{})}),document.getElementById("root"));
